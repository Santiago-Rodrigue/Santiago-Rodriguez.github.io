<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bermuda Cargo Realtree</title>
  <link rel="stylesheet" href="producto.css">
  <link rel="icon" type="image/png" href="../imagenes/logo.png">
</head>
<body>

  <!-- PERFIL -->
  <div class="perfil">
    <img src="../imagenes/logo.png" alt="perfil">
    <h2>INTIMAMENTE MODA</h2>
  </div>

  <!-- MEN√ö -->
  <nav>
    <a href="../index.html">CAT√ÅLOGO</a>
    <a href="../principal/ofertas.html">OFERTAS</a>
    <a href="../principal/contactos.html">CONTACTO</a>
    <a href="#" id="ver-carrito">üõí Carrito (<span id="cantidad-carrito">0</span>)</a>
  </nav>

  <!-- PRODUCTO -->
  <div class="contenedor-producto">
    <!-- Miniaturas -->
    <div class="galeria">
      <img src="../imagenes/bermuda1.png" alt="Vista frontal" class="activa">
      <img src="../imagenes/bermuda2.png" alt="Vista lateral">
      <img src="../imagenes/bermuda3.png" alt="Vista trasera">
    </div>

    <!-- Imagen principal -->
    <div class="imagen-principal">
      <img src="../imagenes/bermuda1.png" alt="Producto principal" id="principal">
    </div>

    <!-- Informaci√≥n -->
    <div class="info">
      <h1>BERMUDA CARGO REALTREE</h1>
      <p class="precio-original">$89.300</p>
      <p class="oferta">$80.370 con transferencia</p>

      <div class="talles">
        <h3>Talle</h3>
        <button>28/38</button>
        <button>30/40</button>
        <button>32/42</button>
        <button>34/44</button>
      </div>

      <div class="cantidad">
        <button onclick="modificarCantidad(-1)">-</button>
        <input type="text" value="1" id="cantidad">
        <button onclick="modificarCantidad(1)">+</button>
      </div>

      <button class="btn-carrito" id="agregarCarrito">Agregar al carrito</button>

      <div class="detalles">
        <h3>Descripci√≥n</h3>
        <p>Bermuda cargo baggy fit camuflado en gabardina estampada realtree. Cintura con trabillas, cierre y bolsillos laterales.</p>
        <p>Composici√≥n: Gabardina 100% algod√≥n.</p>
        <p>Se recomienda lavar con agua fr√≠a y sin cloro.</p>

        <h3>Medios de Pago</h3>
        <p>6 cuotas sin inter√©s con tarjeta. Transferencia con descuento.</p>

        <h3>Env√≠os</h3>
        <p>Env√≠o a todo el pa√≠s. Gratis desde $50.000.</p>

        <h3>Pickup</h3>
        <p>Pod√©s retirar gratis en nuestro local.</p>
      </div>
    </div>
  </div>

  <!-- MODAL CARRITO -->
  <div id="modal-carrito" class="modal">
    <div class="modal-contenido">
      <h2>üõçÔ∏è Tu carrito</h2>
      <ul id="lista-carrito"></ul>
      <p id="total"></p>
      <button id="vaciar-carrito">Vaciar carrito</button>
      <button id="cerrar-carrito">Cerrar</button>
      <button id="pagar-carrito">Pagar üí≥</button>
    </div>
  </div>

  <script>
    // Miniaturas
    const principal = document.getElementById('principal');
    const miniaturas = document.querySelectorAll('.galeria img');
    miniaturas.forEach(img => {
      img.addEventListener('click', () => {
        principal.src = img.src;
        miniaturas.forEach(i => i.classList.remove('activa'));
        img.classList.add('activa');
      });
    });

    // Cantidad
    function modificarCantidad(valor) {
      const input = document.getElementById('cantidad');
      let cantidad = parseInt(input.value);
      cantidad += valor;
      if (cantidad < 1) cantidad = 1;
      input.value = cantidad;
    }

    // Talles
    const botonesTalle = document.querySelectorAll('.talles button');
    let talleSeleccionado = "";
    botonesTalle.forEach(btn => {
      btn.addEventListener('click', () => {
        botonesTalle.forEach(b => b.classList.remove('seleccionado'));
        btn.classList.add('seleccionado');
        talleSeleccionado = btn.textContent;
      });
    });

    // Carrito con localStorage
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    const cantidadCarrito = document.getElementById('cantidad-carrito');
    const listaCarrito = document.getElementById('lista-carrito');
    const modalCarrito = document.getElementById('modal-carrito');
    const verCarrito = document.getElementById('ver-carrito');
    const cerrarCarrito = document.getElementById('cerrar-carrito');
    const vaciarCarrito = document.getElementById('vaciar-carrito');
    const pagarCarrito = document.getElementById('pagar-carrito');
    const total = document.getElementById('total');

    document.getElementById('agregarCarrito').addEventListener('click', () => {
      const cantidad = parseInt(document.getElementById('cantidad').value);
      const producto = {
        nombre: "Bermuda Cargo Realtree",
        precio: 89300,
        talle: talleSeleccionado || "No seleccionado",
        cantidad: cantidad
      };
      carrito.push(producto);
      localStorage.setItem('carrito', JSON.stringify(carrito));
      actualizarCarrito();
      alert(`${producto.nombre} agregado al carrito üõçÔ∏è`);
    });

    function actualizarCarrito() {
      listaCarrito.innerHTML = '';
      let totalCompra = 0;
      carrito.forEach((p, i) => {
        const li = document.createElement('li');
        li.innerHTML = `
          ${p.nombre} (Talle ${p.talle}) x${p.cantidad} - $${(p.precio * p.cantidad).toLocaleString()}
          <button class="eliminar" data-index="${i}">üóëÔ∏è</button>
        `;
        listaCarrito.appendChild(li);
        totalCompra += p.precio * p.cantidad;
      });

      cantidadCarrito.textContent = carrito.reduce((acc, p) => acc + p.cantidad, 0);
      total.textContent = carrito.length ? `Total: $${totalCompra.toLocaleString()}` : 'El carrito est√° vac√≠o.';

      document.querySelectorAll('.eliminar').forEach(btn => {
        btn.addEventListener('click', e => {
          const index = e.target.dataset.index;
          carrito.splice(index, 1);
          localStorage.setItem('carrito', JSON.stringify(carrito));
          actualizarCarrito();
        });
      });
    }

    verCarrito.addEventListener('click', () => { modalCarrito.style.display = 'flex'; });
    cerrarCarrito.addEventListener('click', () => { modalCarrito.style.display = 'none'; });
    vaciarCarrito.addEventListener('click', () => {
      carrito = [];
      localStorage.removeItem('carrito');
      actualizarCarrito();
    });

    pagarCarrito.addEventListener('click', () => {
      if (carrito.length === 0) {
        alert('El carrito est√° vac√≠o.');
        return;
      }
      window.location.href = '../principal/pago.html';
    });

    actualizarCarrito();
  </script>
</body>
</html>
